<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map with Search for GeoJSON/TopoJSON</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/topojson@3.1.0"></script>
    <script src="https://unpkg.com/leaflet-control-search@2.8.0/dist/leaflet-search.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-search@2.8.0/dist/leaflet-search.min.css" />
</head>
<body>

<div id="map" style="height: 600px;"></div>

<script>
    var map = L.map('map').setView([20.5937, 78.9629], 5); // Center map on India
    // Add search functionality
    var searchControl = new L.Control.Search({
        layer: geojsonLayer,       // Target GeoJSON layer for searching
        propertyName: 'name',       // Search by 'name' property in GeoJSON
        marker: false,
        moveToLocation: function(latlng, title, map) {
            map.setView(latlng, 10); // Set zoom level for found location
        }
    });
    map.addControl(searchControl);  // Add search control to the map


    // GeoJSON and TopoJSON layers
    var geojsonLayer;
    fetch('C:\Users\Shrinjita Paul\Documents\GitHub\SheForAI\data\india-maps-data\geojson')
        .then(response => response.json())
        .then(data => {
            geojsonLayer = L.geoJSON(data, {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup("<strong>Place:</strong> " + feature.properties.name);
                }
            }).addTo(map);
        });

    // If using TopoJSON
    fetch('C:\Users\Shrinjita Paul\Documents\GitHub\SheForAI\data\india-maps-data\topojson')
        .then(response => response.json())
        .then(data => {
            var topoLayer = L.geoJSON(topojson.feature(data, data.objects.yourObjectName), {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup("<strong>Place:</strong> " + feature.properties.name);
                }
            }).addTo(map);
        });

    // Add red dots from external JSON
    fetch('C:\Users\Shrinjita Paul\Documents\GitHub\SheForAI\femaleunsafe.json.json')
        .then(response => response.json())
        .then(data => {
            data.forEach(coord => {
                L.circleMarker([coord.latitude, coord.longitude], {
                    radius: 12,
                    color: 'red',
                    fillOpacity: 0.6
                }).addTo(map);
            });
        });

    // Add search functionality
    var searchControl = new L.Control.Search({
        layer: geojsonLayer,
        propertyName: 'name', // Search for 'name' property in GeoJSON
        marker: false,
        moveToLocation: function(latlng, title, map) {
            map.setView(latlng, 10); // Zoom level for found location
        }
    });

    map.addControl(searchControl);
</script>

</body>
</html>
